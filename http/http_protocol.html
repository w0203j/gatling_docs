

<ol class="breadcrumb">
  <li><a href="../index.html">Gatling documentation</a></li>
  <li><a href="index.html" accesskey="U">
    HTTP
    </a>
  </li>
  <li><a href="">
    HTTP Protocol
  </a></li>
</ol>

<div class="content-left-wrap col-md-9">
  <div id="primary" class="content-area">
    <main itemscope="" itemtype="http://schema.org/WebPageElement" itemprop="mainContentOfPage" id="main"
          class="site-main">
      <article id="documentation" class="type-post status-publish format-standard hentry category-non-classe">
        <header class="entry-header">
          <h1 class="entry-title" itemprop="headline">HTTP Protocol</h1>
        </header>
        <div class="entry-content" itemprop="text">
          
          <div class="section" id="http-protocol">
<span id="id1"></span>
<p>HTTP is the main protocol Gatling targets, so that’s where we place most of our effort.</p>
<p>Gatling HTTP allows you to load test web applications, web services or websites.
It supports HTTP and HTTPS with almost every existing feature of common browsers such as caching, cookies, redirect, etc.</p>
<p>However, Gatling <strong>is not a browser</strong>: it won’t run Javascript, won’t apply CSS styles and trigger CSS background-images download, won’t react to UI events, etc.
Gatling works at the HTTP protocol level.</p>
<div class="section" id="bootstrapping">
<h2>Bootstrapping<a class="headerlink" href="#bootstrapping" title="Permalink to this headline">¶</a></h2>
<p>Use the <code class="docutils literal"><span class="pre">http</span></code> object in order to create an HTTP protocol.</p>
<p>As every protocol in Gatling, the HTTP protocol can be configured for a scenario.
This is done thanks to the following statements:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">httpConf</span> <span class="k">=</span> <span class="n">http</span><span class="o">.</span><span class="n">baseURL</span><span class="o">(</span><span class="s">&quot;http://my.website.tld&quot;</span><span class="o">)</span>

<span class="k">val</span> <span class="n">scn</span> <span class="k">=</span> <span class="n">scenario</span><span class="o">(</span><span class="s">&quot;myScenario&quot;</span><span class="o">)</span> <span class="c1">// etc...</span>

<span class="n">setUp</span><span class="o">(</span><span class="n">scn</span><span class="o">.</span><span class="n">inject</span><span class="o">(</span><span class="n">atOnceUsers</span><span class="o">(</span><span class="mi">1</span><span class="o">)).</span><span class="n">protocols</span><span class="o">(</span><span class="n">httpConf</span><span class="o">))</span>
</pre></div>
</div>
</div>
<div class="section" id="core-parameters">
<h2>Core parameters<a class="headerlink" href="#core-parameters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="base-url">
<span id="http-protocol-base-url"></span><h3>Base URL<a class="headerlink" href="#base-url" title="Permalink to this headline">¶</a></h3>
<p>As you may have seen in the previous example, you can set a base URL.
This base URL will be prepended to all urls that does not start with <code class="docutils literal"><span class="pre">http</span></code>, e.g.:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">httpConf</span> <span class="k">=</span> <span class="n">http</span><span class="o">.</span><span class="n">baseURL</span><span class="o">(</span><span class="s">&quot;http://my.website.tld&quot;</span><span class="o">)</span>

<span class="k">val</span> <span class="n">scn</span> <span class="k">=</span> <span class="n">scenario</span><span class="o">(</span><span class="s">&quot;My Scenario&quot;</span><span class="o">)</span>
  <span class="o">.</span><span class="n">exec</span><span class="o">(</span>
    <span class="n">http</span><span class="o">(</span><span class="s">&quot;My Request&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="s">&quot;/my_path&quot;</span><span class="o">))</span> <span class="c1">// Will actually make a request on &quot;http://my.website.tld/my_path&quot;</span>
  <span class="o">.</span><span class="n">exec</span><span class="o">(</span>
    <span class="n">http</span><span class="o">(</span><span class="s">&quot;My Other Request&quot;</span><span class="o">)</span>
      <span class="o">.</span><span class="n">get</span><span class="o">(</span><span class="s">&quot;http://other.website.tld&quot;</span><span class="o">))</span> <span class="c1">// Will make a request on &quot;http://other.website.tld&quot;</span>

<span class="n">setUp</span><span class="o">(</span><span class="n">scn</span><span class="o">.</span><span class="n">inject</span><span class="o">(</span><span class="n">atOnceUsers</span><span class="o">(</span><span class="mi">1</span><span class="o">)).</span><span class="n">protocols</span><span class="o">(</span><span class="n">httpConf</span><span class="o">))</span>
</pre></div>
</div>
</div>
<div class="section" id="load-testing-several-servers-with-client-based-load-balancing">
<h3>Load testing several servers with client based load balancing<a class="headerlink" href="#load-testing-several-servers-with-client-based-load-balancing" title="Permalink to this headline">¶</a></h3>
<p>If you want to load test several servers at the same time, to bypass a load-balancer for example, you can use methods named <code class="docutils literal"><span class="pre">baseURLs</span></code> which accepts a <code class="docutils literal"><span class="pre">String*</span></code> or a <code class="docutils literal"><span class="pre">List[String]</span></code>:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">httpConf</span> <span class="k">=</span> <span class="n">http</span><span class="o">.</span><span class="n">baseURLs</span><span class="o">(</span><span class="s">&quot;http://my1.website.tld&quot;</span><span class="o">,</span> <span class="s">&quot;http://my2.website.tld&quot;</span><span class="o">,</span> <span class="s">&quot;http://my3.website.tld&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>The selection of the URL is made at each request, using the <code class="docutils literal"><span class="pre">Random</span></code> generator.</p>
</div>
<div class="section" id="automatic-warm-up">
<span id="http-protocol-warmup"></span><h3>Automatic warm up<a class="headerlink" href="#automatic-warm-up" title="Permalink to this headline">¶</a></h3>
<p>The Java/NIO engine start up introduces an overhead on the first request to be executed.
In order to compensate this effect, Gatling automatically performs a request to <a class="reference external" href="http://gatling.io">http://gatling.io</a>.</p>
<p>To disable this feature, just add <code class="docutils literal"><span class="pre">.disableWarmUp</span></code> to an HTTP Protocol Configuration definition.
To change the warm up url, just add <code class="docutils literal"><span class="pre">.warmUp(&quot;newUrl&quot;)</span></code>.</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="c1">// override warm up URL to http://www.google.com</span>
<span class="k">val</span> <span class="n">httpConf</span> <span class="k">=</span> <span class="n">http</span><span class="o">.</span><span class="n">warmUp</span><span class="o">(</span><span class="s">&quot;http://www.google.com&quot;</span><span class="o">)</span>
<span class="c1">// disable warm up</span>
<span class="k">val</span> <span class="n">httpConfNoWarmUp</span> <span class="k">=</span> <span class="n">http</span><span class="o">.</span><span class="n">disableWarmUp</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="engine-parameters">
<h2>Engine parameters<a class="headerlink" href="#engine-parameters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="max-connection-per-host">
<span id="http-protocol-max-connection"></span><h3>Max connection per host<a class="headerlink" href="#max-connection-per-host" title="Permalink to this headline">¶</a></h3>
<p>In order to mimic real web browser, Gatling can run multiple concurrent connections <strong>per virtual user</strong> when fetching resources on the same hosts.
By default, Gatling caps the number of concurrent connections per remote host per virtual user to 6, but you can change this number with <code class="docutils literal"><span class="pre">maxConnectionsPerHost(max:</span> <span class="pre">Int)</span></code>.</p>
<p>Gatling ships a bunch of built-ins for well-known browsers:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">maxConnectionsPerHostLikeFirefoxOld</span></code></li>
<li><code class="docutils literal"><span class="pre">maxConnectionsPerHostLikeFirefox</span></code></li>
<li><code class="docutils literal"><span class="pre">maxConnectionsPerHostLikeOperaOld</span></code></li>
<li><code class="docutils literal"><span class="pre">maxConnectionsPerHostLikeOpera</span></code></li>
<li><code class="docutils literal"><span class="pre">maxConnectionsPerHostLikeSafariOld</span></code></li>
<li><code class="docutils literal"><span class="pre">maxConnectionsPerHostLikeSafari</span></code></li>
<li><code class="docutils literal"><span class="pre">maxConnectionsPerHostLikeIE7</span></code></li>
<li><code class="docutils literal"><span class="pre">maxConnectionsPerHostLikeIE8</span></code></li>
<li><code class="docutils literal"><span class="pre">maxConnectionsPerHostLikeIE10</span></code></li>
<li><code class="docutils literal"><span class="pre">maxConnectionsPerHostLikeChrome</span></code></li>
</ul>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="c1">// 10 connections per host.</span>
<span class="k">val</span> <span class="n">httpConfMax10Connections</span> <span class="k">=</span> <span class="n">http</span><span class="o">.</span><span class="n">maxConnectionsPerHost</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span>
<span class="c1">// Firefox max connections per host preset.</span>
<span class="k">val</span> <span class="n">httpConfMaxConnectionsLikeFirefox</span> <span class="k">=</span> <span class="n">http</span><span class="o">.</span><span class="n">maxConnectionsPerHostLikeFirefox</span>
</pre></div>
</div>
</div>
<div class="section" id="connection-sharing">
<span id="http-protocol-connection-sharing"></span><h3>Connection Sharing<a class="headerlink" href="#connection-sharing" title="Permalink to this headline">¶</a></h3>
<p>In Gatling 1, connections are shared amongst users until 1.5 version.
This behavior does not match real browsers, and doesn’t support SSL session tracking.</p>
<p>In Gatling 2, the default behavior is that every user has his own connection pool.
This can be tuned with the <code class="docutils literal"><span class="pre">.shareConnections</span></code> param.</p>
</div>
<div class="section" id="http-client-sharing">
<span id="http-protocol-client-sharing"></span><h3>HTTP Client Sharing<a class="headerlink" href="#http-client-sharing" title="Permalink to this headline">¶</a></h3>
<p>If you need more isolation of your user, for instance if you need a dedicated key store per user,
Gatling lets you have an instance of the HTTP client per user with <code class="docutils literal"><span class="pre">.disableClientSharing</span></code>.</p>
</div>
<div class="section" id="hostname-resolution">
<span id="http-protocol-hostname-resolution"></span><h3>Hostname Resolution<a class="headerlink" href="#hostname-resolution" title="Permalink to this headline">¶</a></h3>
<p>By default, Gatling uses Java’s name resolution, meaning that it uses a cache shared amongst all virtual users.
This cache can be disabled with <code class="docutils literal"><span class="pre">-Dsun.net.inetaddr.ttl=0</span></code>.</p>
<p>One can change this behaviour and set <code class="docutils literal"><span class="pre">.perUserNameResolution</span></code> so all virtual users resolve names on their own.
This feature is experimental, but might become the default in future versions.</p>
<p>This feature is pretty useful if you’re dealing with an elastic cluster where new IPs are added to the DNS server under load,
for example with AWS Elastic Load Balancer (ELB).</p>
</div>
<div class="section" id="hostname-aliasing">
<span id="http-protocol-hostname-aliasing"></span><h3>Hostname Aliasing<a class="headerlink" href="#hostname-aliasing" title="Permalink to this headline">¶</a></h3>
<p>You can of course define hostname aliases at the OS level in the <code class="docutils literal"><span class="pre">/etc/hosts</span></code> file.</p>
<p>But you can also pass a <code class="docutils literal"><span class="pre">Map[String,</span> <span class="pre">String]</span></code> to <code class="docutils literal"><span class="pre">.hostNameAliases</span></code> where values are valid IP addresses.
Note that, just like with <code class="docutils literal"><span class="pre">/etc/hosts</span></code> you can only define one IP per alias.</p>
</div>
<div class="section" id="virtual-host">
<span id="http-protocol-virtual-host"></span><h3>Virtual Host<a class="headerlink" href="#virtual-host" title="Permalink to this headline">¶</a></h3>
<p>One can set a different Host than the url one:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">virtualHost</span><span class="o">(</span><span class="n">virtualHost</span><span class="k">:</span> <span class="kt">Expression</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span>
</pre></div>
</div>
</div>
<div class="section" id="local-address">
<span id="http-protocol-local-address"></span><h3>Local address<a class="headerlink" href="#local-address" title="Permalink to this headline">¶</a></h3>
<p>You can bind the sockets from specific local addresses instead of the default one:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="n">localAddress</span><span class="o">(</span><span class="n">localAddress</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>
<span class="n">localAddresses</span><span class="o">(</span><span class="n">localAddress1</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">localAddress2</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span>
</pre></div>
</div>
<p>When setting multiple addresses, each virtual user is assigned to one single local address once and for all.</p>
</div>
</div>
<div class="section" id="request-building-parameters">
<h2>Request building parameters<a class="headerlink" href="#request-building-parameters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="automatic-referer">
<span id="http-protocol-referer"></span><h3>Automatic Referer<a class="headerlink" href="#automatic-referer" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">Referer</span></code> HTTP header can be automatically computed.
This feature is enabled by default.</p>
<p>To disable this feature, just add <code class="docutils literal"><span class="pre">.disableAutoReferer</span></code> to an HTTP Protocol Configuration definition.</p>
</div>
<div class="section" id="caching">
<span id="http-protocol-caching"></span><h3>Caching<a class="headerlink" href="#caching" title="Permalink to this headline">¶</a></h3>
<p>Gatling caches responses using :</p>
<ul class="simple">
<li>Expires header</li>
<li>Cache-Control header</li>
<li>Last-Modified header</li>
<li>ETag</li>
</ul>
<p>To disable this feature, just add <code class="docutils literal"><span class="pre">.disableCaching</span></code> to an HTTP Protocol Configuration definition.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When a response gets cached, checks are disabled.</p>
</div>
</div>
<div class="section" id="url-encoding">
<span id="http-protocol-urlencoding"></span><h3>Url Encoding<a class="headerlink" href="#url-encoding" title="Permalink to this headline">¶</a></h3>
<p>Url components are supposed to be <a class="reference external" href="http://www.w3schools.com/tags/ref_urlencode.asp">urlencoded</a>.
Gatling will encode them for you, there might be some corner cases where already encoded components might be encoded twice.</p>
<p>If you know that your urls are already properly encoded, you can disable this feature with <code class="docutils literal"><span class="pre">.disableUrlEncoding</span></code>.
Note that this feature can also be <a class="reference internal" href="http_request.html#http-request-urlencoding"><span class="std std-ref">disabled per request</span></a>.</p>
</div>
<div class="section" id="silencing">
<span id="http-protocol-silencing"></span><h3>Silencing<a class="headerlink" href="#silencing" title="Permalink to this headline">¶</a></h3>
<p>Request stats are logged and then used to produce reports.
Sometimes, some requests may be important for you for generating load, but you don’t actually want to report them.
Typically, reporting all static resources might generate a lot of noise, and yet failed static resources are usually non blocking from a user experience perspective.</p>
<p>Gatling provides several means to turn requests silent.
Silent requests won’t be reported and won’t influence error triggers such as <a class="reference internal" href="../general/scenario.html#scenario-trymax"><span class="std std-ref">tryMax</span></a> and <a class="reference internal" href="../general/scenario.html#scenario-exithereiffailed"><span class="std std-ref">exitHereIfFailed</span></a>.
Yet, response times will be accounted for in <code class="docutils literal"><span class="pre">group</span></code> times.</p>
<p>Some parameters are available here at protocol level, some others are available at request level.</p>
<p>Rules are:</p>
<ul class="simple">
<li>explicitly turning a given request <a class="reference internal" href="http_request.html#http-request-silent"><span class="std std-ref">silent</span></a> or <a class="reference internal" href="http_request.html#http-request-notsilent"><span class="std std-ref">notSilent</span></a> has precedence over everything else</li>
<li>otherwise, a request is silent if it matches protocol’s <code class="docutils literal"><span class="pre">silentURI</span></code> filter</li>
<li>otherwise, a request is silent if it’s a resource (not a top level request) and protocol’s <code class="docutils literal"><span class="pre">silentResources</span></code> flag has been turned on</li>
<li>otherwise, a request is not silent</li>
</ul>
<p id="http-protocol-silenturi"><code class="docutils literal"><span class="pre">silentURI</span></code> lets you pass a regular expression that would disable logging for ALL matching requests:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">silentURI</span><span class="o">(</span><span class="s">&quot;https://myCDN/.*&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p id="http-protocol-silentresources"><code class="docutils literal"><span class="pre">silentResources</span></code> silences all resource requests, except the ones that were explicitly turned <code class="docutils literal"><span class="pre">notSilent</span></code>.</p>
</div>
<div class="section" id="http-headers">
<span id="http-protocol-headers"></span><h3>HTTP Headers<a class="headerlink" href="#http-headers" title="Permalink to this headline">¶</a></h3>
<p>Gatling lets you set some generic headers at the http protocol definition level with:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">header(name:</span> <span class="pre">String,</span> <span class="pre">value:</span> <span class="pre">Expression[String])</span></code>: set a single header.</li>
<li><code class="docutils literal"><span class="pre">headers(headers:</span> <span class="pre">Map[String,</span> <span class="pre">String])</span></code>: set a bunch of headers.</li>
</ul>
<p>e.g.:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">header</span><span class="o">(</span><span class="s">&quot;foo&quot;</span><span class="o">,</span> <span class="s">&quot;bar&quot;</span><span class="o">)</span>
<span class="o">.</span><span class="n">headers</span><span class="o">(</span><span class="nc">Map</span><span class="o">(</span><span class="s">&quot;foo&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;bar&quot;</span><span class="o">,</span> <span class="s">&quot;baz&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;qix&quot;</span><span class="o">))</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><code class="docutils literal"><span class="pre">headers</span></code> used to be named <code class="docutils literal"><span class="pre">baseHeaders</span></code>. Old name was deprecated, then removed in 2.1.</p>
</div>
<p>You have also the following built-ins for the more commons headers:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">acceptHeader(value:</span> <span class="pre">Expression[String])</span></code>: set <code class="docutils literal"><span class="pre">Accept</span></code> header.</li>
<li><code class="docutils literal"><span class="pre">acceptCharsetHeader(value:</span> <span class="pre">Expression[String])</span></code>: set <code class="docutils literal"><span class="pre">Accept-Charset</span></code> header.</li>
<li><code class="docutils literal"><span class="pre">acceptEncodingHeader(value:</span> <span class="pre">Expression[String])</span></code>: set <code class="docutils literal"><span class="pre">Accept-Encoding</span></code> header.</li>
<li><code class="docutils literal"><span class="pre">acceptLanguageHeader(value:</span> <span class="pre">Expression[String])</span></code>: set <code class="docutils literal"><span class="pre">Accept-Language</span></code> header.</li>
<li><code class="docutils literal"><span class="pre">authorizationHeader(value:</span> <span class="pre">Expression[String])</span></code>: set <code class="docutils literal"><span class="pre">Authorization</span></code> header.</li>
<li><code class="docutils literal"><span class="pre">connectionHeader(value:</span> <span class="pre">Expression[String])</span></code>: set <code class="docutils literal"><span class="pre">Connection</span></code> header.</li>
<li><code class="docutils literal"><span class="pre">contentTypeHeader(value:</span> <span class="pre">Expression[String])</span></code>: set <code class="docutils literal"><span class="pre">Content-Type</span></code> header.</li>
<li><code class="docutils literal"><span class="pre">doNotTrackHeader(value:</span> <span class="pre">Expression[String])</span></code>: set <code class="docutils literal"><span class="pre">DNT</span></code> header.</li>
<li><code class="docutils literal"><span class="pre">userAgentHeader(value:</span> <span class="pre">Expression[String])</span></code>: set <code class="docutils literal"><span class="pre">User-Agent</span></code> header.</li>
</ul>
</div>
<div class="section" id="authentication">
<span id="http-protocol-auth"></span><h3>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h3>
<p>You can set the authentication methods at protocol level with these methods:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">basicAuth(username:</span> <span class="pre">Expression[String],</span> <span class="pre">password:</span> <span class="pre">Expression[String])</span></code></li>
<li><code class="docutils literal"><span class="pre">digestAuth(username:</span> <span class="pre">Expression[String],</span> <span class="pre">password:</span> <span class="pre">Expression[String])</span></code></li>
<li><code class="docutils literal"><span class="pre">ntlmAuth(username:</span> <span class="pre">Expression[String],</span> <span class="pre">password:</span> <span class="pre">Expression[String],</span> <span class="pre">ntlmDomain:</span> <span class="pre">Expression[String],</span> <span class="pre">ntlmHost:</span> <span class="pre">Expression[String])</span></code></li>
<li><code class="docutils literal"><span class="pre">authRealm(realm:</span> <span class="pre">Expression[com.ning.http.client.Realm])</span></code></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For more details see the dedicated section <a class="reference internal" href="http_request.html#http-request-authentication"><span class="std std-ref">here</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="response-handling-parameters">
<h2>Response handling parameters<a class="headerlink" href="#response-handling-parameters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="follow-redirects">
<span id="http-protocol-redirect"></span><h3>Follow redirects<a class="headerlink" href="#follow-redirects" title="Permalink to this headline">¶</a></h3>
<p>By default Gatling automatically follow redirects in case of 301, 302, 303 or 307 response status code, you can disable this behavior with <code class="docutils literal"><span class="pre">.disableFollowRedirect</span></code>.</p>
<p>To avoid infinite redirection loops, you can specify a number max of redirects with:  <code class="docutils literal"><span class="pre">.maxRedirects(max:</span> <span class="pre">Int)</span></code></p>
<p>By default, Gatling will change the method to “GET” on 302 to conform to most user agents’ behavior.
You can disable this behavior with <code class="docutils literal"><span class="pre">.strict302Handling</span></code>.</p>
</div>
<div class="section" id="response-chunks-discarding">
<span id="http-protocol-chunksdiscard"></span><h3>Response chunks discarding<a class="headerlink" href="#response-chunks-discarding" title="Permalink to this headline">¶</a></h3>
<p>Beware that, as an optimization, Gatling doesn’t keep response chunks unless a check is defined on the response body or that debug logging is enabled.
However some people might want to always keep the response chunks, thus you can disable the default behavior with <code class="docutils literal"><span class="pre">disableResponseChunksDiscarding</span></code>.</p>
</div>
<div class="section" id="dumping-custom-data">
<span id="http-protocol-extractor"></span><h3>Dumping custom data<a class="headerlink" href="#dumping-custom-data" title="Permalink to this headline">¶</a></h3>
<p>Some people might want more data than what Gatling normally dumps in the <code class="docutils literal"><span class="pre">simulation.log</span></code> file.</p>
<p>Http protocol provide a hook for dumping extra data with <code class="docutils literal"><span class="pre">extraInfoExtractor(f:</span> <span class="pre">ExtraInfoExtractor)</span></code>.
<code class="docutils literal"><span class="pre">ExtraInfoExtractor</span></code> is a shortcut for the function type: <code class="docutils literal"><span class="pre">(ExtraInfo)</span> <span class="pre">=&gt;</span> <span class="pre">List[Any]</span></code>.
Thus your extractor need to return a <code class="docutils literal"><span class="pre">List[Any]</span></code>, <code class="docutils literal"><span class="pre">Any</span></code> is the equivalent of <code class="docutils literal"><span class="pre">Object</span></code> in Scala.
<code class="docutils literal"><span class="pre">ExtraInfo</span></code> gives you access to :</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">requestName</span></code>: The name of the request.</li>
<li><code class="docutils literal"><span class="pre">status</span></code>: The status of the request, i.e. OK/KO.</li>
<li><code class="docutils literal"><span class="pre">session</span></code>: The user’s Session.</li>
<li><code class="docutils literal"><span class="pre">request</span></code>: The http request.</li>
<li><code class="docutils literal"><span class="pre">response</span></code>: The http response.</li>
</ul>
<p>The extra data will be appended to the relative records in the <code class="docutils literal"><span class="pre">simulation.log</span></code> file and reports generation will ignore them.
It’s up to the user to build his own analysis system for them.</p>
<p>For example, it you’d like the dump the response body’s length to <code class="docutils literal"><span class="pre">simulation.log</span></code>, you would do:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">httpProtocol</span> <span class="k">=</span> <span class="n">http</span><span class="o">.</span><span class="n">extraInfoExtractor</span><span class="o">(</span><span class="n">extraInfo</span> <span class="k">=&gt;</span> <span class="nc">List</span><span class="o">(</span><span class="n">extraInfo</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">bodyLength</span><span class="o">))</span>
</pre></div>
</div>
<p>Gatling provides a built-in <code class="docutils literal"><span class="pre">ExtraInfoExtractor</span></code>, <code class="docutils literal"><span class="pre">dumpSessionOnFailure</span></code>, which dumps the user’s session to <code class="docutils literal"><span class="pre">simulation.log</span></code> if the request failed.</p>
</div>
<div class="section" id="response-transformers">
<span id="http-protocol-response-transformer"></span><h3>Response Transformers<a class="headerlink" href="#response-transformers" title="Permalink to this headline">¶</a></h3>
<p>Some people might want to process manually the response. Gatling protocol provides a hook for that need: <code class="docutils literal"><span class="pre">transformResponse(responseTransformer:</span> <span class="pre">ResponseTransformer)</span></code></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For more details see the dedicated section <a class="reference internal" href="http_request.html#http-response-transformer"><span class="std std-ref">here</span></a>.</p>
</div>
</div>
<div class="section" id="checks">
<span id="http-protocol-check"></span><h3>Checks<a class="headerlink" href="#checks" title="Permalink to this headline">¶</a></h3>
<p>You can define checks at the http protocol definition level with: <code class="docutils literal"><span class="pre">check(checks:</span> <span class="pre">HttpCheck*)</span></code>.
They will be apply on all the requests, however you can disable them for given request thanks to the <code class="docutils literal"><span class="pre">ignoreDefaultChecks</span></code> method.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For more details see the dedicated section <a class="reference internal" href="http_check.html#http-check"><span class="std std-ref">here</span></a>.</p>
</div>
</div>
<div class="section" id="resource-inferring">
<span id="http-protocol-infer"></span><h3>Resource inferring<a class="headerlink" href="#resource-inferring" title="Permalink to this headline">¶</a></h3>
<p>Gatling can fetch resources in parallel in order to emulate the behavior of a real web browser.</p>
<p>At the protocol level, you can use <code class="docutils literal"><span class="pre">inferHtmlResources</span></code> methods, so Gatling will automatically parse HTML to find embedded resources and load them asynchronously.</p>
<p>The supported resources are:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">&lt;script&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">&lt;base&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">&lt;link&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">&lt;bgsound&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">&lt;frame&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">&lt;iframe&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">&lt;img&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">&lt;input&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">&lt;body&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">&lt;applet&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">&lt;embed&gt;</span></code></li>
<li><code class="docutils literal"><span class="pre">&lt;object&gt;</span></code></li>
<li>import directives in HTML and &#64;import CSS rule.</li>
</ul>
<p>Other resources are not supported: css images, javascript triggered resources, conditional comments, etc.</p>
<p>You can also specify black/white list or custom filters to have a more fine grain control on resource fetching.
<code class="docutils literal"><span class="pre">WhiteList</span></code> and <code class="docutils literal"><span class="pre">BlackList</span></code> take a sequence of pattern, eg <code class="docutils literal"><span class="pre">Seq(&quot;http://www.google.com/.*&quot;,</span> <span class="pre">&quot;http://www.github.com/.*&quot;)</span></code>, to include and exclude respectively.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">inferHtmlResources(white:</span> <span class="pre">WhiteList)</span></code>: fetch all resources matching a pattern in the white list.</li>
<li><code class="docutils literal"><span class="pre">inferHtmlResources(white:</span> <span class="pre">WhiteList,</span> <span class="pre">black:</span> <span class="pre">BlackList)</span></code>: fetch all resources matching a pattern in the white list excepting those in the black list.</li>
<li><code class="docutils literal"><span class="pre">inferHtmlResources(black:</span> <span class="pre">BlackList,</span> <span class="pre">white:</span> <span class="pre">WhiteList</span> <span class="pre">=</span> <span class="pre">WhiteList(Nil))</span></code>: fetch all resources excepting those matching a pattern in the black list and not in the white list.</li>
<li><code class="docutils literal"><span class="pre">inferHtmlResources(filters:</span> <span class="pre">Option[Filters])</span></code></li>
</ul>
</div>
<div class="section" id="proxy-parameters">
<span id="http-protocol-proxy"></span><h3>Proxy parameters<a class="headerlink" href="#proxy-parameters" title="Permalink to this headline">¶</a></h3>
<p>You can tell Gatling to use a proxy to send the HTTP requests.
You can optionally set a different port for HTTPS and credentials:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">httpConf</span> <span class="k">=</span> <span class="n">http</span>
  <span class="o">.</span><span class="n">proxy</span><span class="o">(</span>
    <span class="nc">Proxy</span><span class="o">(</span><span class="s">&quot;myProxyHost&quot;</span><span class="o">,</span> <span class="mi">8080</span><span class="o">)</span>
      <span class="o">.</span><span class="n">httpsPort</span><span class="o">(</span><span class="mi">8143</span><span class="o">)</span>
      <span class="o">.</span><span class="n">credentials</span><span class="o">(</span><span class="s">&quot;myUsername&quot;</span><span class="o">,</span> <span class="s">&quot;myPassword&quot;</span><span class="o">)</span>
  <span class="o">)</span>
</pre></div>
</div>
<p>You can also disable the use of proxy for a given list of hosts with <code class="docutils literal"><span class="pre">noProxyFor(hosts:</span> <span class="pre">String*)</span></code>:</p>
<div class="highlight-scala"><div class="highlight"><pre><span></span><span class="k">val</span> <span class="n">httpConf</span> <span class="k">=</span> <span class="n">http</span>
  <span class="o">.</span><span class="n">proxy</span><span class="o">(</span><span class="nc">Proxy</span><span class="o">(</span><span class="s">&quot;myProxyHost&quot;</span><span class="o">,</span> <span class="mi">8080</span><span class="o">))</span>
  <span class="o">.</span><span class="n">noProxyFor</span><span class="o">(</span><span class="s">&quot;www.github.com&quot;</span><span class="o">,</span> <span class="s">&quot;www.akka.io&quot;</span><span class="o">)</span>
</pre></div>
</div>
</div>
</div>
</div>

          
        </div>
      </article>
    </main>
  </div>
</div>


<div class="sidebar-wrap col-md-3 content-left-wrap">
  <div id="secondary" class="widget-area" role="complementary" itemscope="itemscope"
       itemtype="http://schema.org/WPSideBar">
    <aside id="search-2" class="widget widget_search">
      <form role="form" method="get" class="search-form" action="../search.html">
        <label>
          <span class="screen-reader-text">Search through the documentation&nbsp;:</span>
          <input type="search" class="search-field" placeholder="Search the documentation" name="q">
        </label>
        <input type="submit" class="search-submit" value="Search">
      </form>
    </aside>
    <aside class="widget">
      <h1 class="widget-title">Table of Content</h1>
      <ul>
<li><a class="reference internal" href="#">HTTP Protocol</a><ul>
<li><a class="reference internal" href="#bootstrapping">Bootstrapping</a></li>
<li><a class="reference internal" href="#core-parameters">Core parameters</a></li>
<li><a class="reference internal" href="#engine-parameters">Engine parameters</a></li>
<li><a class="reference internal" href="#request-building-parameters">Request building parameters</a></li>
<li><a class="reference internal" href="#response-handling-parameters">Response handling parameters</a></li>
</ul>
</li>
</ul>

    </aside>
    
    <aside class="widget">
      <h1 class="widget-title">Previous topic</h1>
      <ul>
        <li>
          <a href="index.html" title="Previous Chapter: HTTP">
            HTTP
          </a>
        </li>
      </ul>
    </aside>
    
    
    <aside class="widget">
      <h1 class="widget-title">Next topic</h1>
      <ul>
        <li>
          <a href="http_request.html" title="Next Chapter: HTTP Request">
            HTTP Request
          </a>
        </li>
      </ul>
    </aside>
    <aside class="widget">
      <h1 class="widget-title">Contribute</h1>
      <ul>
        <li>
          <a href="https://github.com/gatling/gatling/edit/master/src/sphinx/http/http_protocol.rst">Edit this page on Github</a>
        </li>
      </ul>
    </aside>
  </div>
</div>





